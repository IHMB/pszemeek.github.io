var g_space=document.getElementById("game_div");var g_score=document.getElementById("score");var g_hint=document.getElementById("hint");var g_pozX=0,g_pozY=0,g_play=false,g_speedV,g_speedH,g_panelW,g_point=0,g_pozTY,g_trash=0,g_trashV=0,g_scored=false,g_kC=0,g_tCW=0,g_sAI=0,g_bgII=3,g_sV1p5,g_pauseS=new Image();g_space.addEventListener("mouseover",function(){g_play=true;},false);g_space.addEventListener("mouseout",function(){g_play=false;},false);document.addEventListener("keydown",gF_setKey,false);var g_ctx=document.getElementById("canvas").getContext("2d");var g_trashCA=new Array();var g_trashA=new Array();var g_bgI=new Array();for(let i=0;i<4;i++){g_trashCA[i]=new Image();g_trashCA[i].src="img/g_/1."+(i)+".svg";g_trashA[i]=new Array();for(let j=0;j<4;j++){g_trashA[i][j]=new Image();g_trashA[i][j].src="img/g_/2."+(i)+"."+(j+1)+".svg";}}for(let i=0;i<7;i++){g_bgI[i]=new Image();g_bgI[i].src="img/g_/"+(-15+(5*i))+"p.svg";}g_pauseS.src="img/g_/pause.svg";setInterval(gF_drawFrame,100);function gF_setKey(event){g_kC=event.keyCode;}function gF_drawFrame(){g_speedH=(g_ctx.canvas.width=g_space.clientWidth)/50;g_speedV=(g_ctx.canvas.height=(g_space.clientWidth/7)*3)/100;g_panelW=g_ctx.canvas.width/4;g_pozTY=g_ctx.canvas.height-g_ctx.canvas.height/3;g_score.innerHTML="Wynik: "+g_point;g_scored=false;g_ctx.drawImage(g_bgI[g_bgII],0,0,g_ctx.canvas.width,g_ctx.canvas.height);g_tCW=(g_panelW/4)*3;g_sAI=g_panelW-(g_tCW/2);if(g_point>0){g_sV1p5=(g_speedV+(1*g_point/5));}else{g_sV1p5=g_speedV;}if(g_trash!=0){g_ctx.drawImage(g_trashA[g_trash-1][g_trashV-1],(g_pozX*g_speedH)-(g_panelW/8),(g_pozY*g_sV1p5)-(g_panelW/6),(g_panelW/3),(g_panelW/3));}for(let i=0;i<4;i++){g_ctx.drawImage(g_trashCA[i],i*g_panelW+g_panelW/8,g_pozTY,g_tCW,g_tCW);if((g_pozY*g_sV1p5)>=g_pozTY){if((g_trash==i+1)&&!((g_pozX*g_speedH)>(i*g_panelW)+g_sAI)&&!((g_pozX*g_speedH)<((i+1)*g_panelW)-g_sAI-g_speedH)){g_scored=true;}}}if(g_play){if((g_pozY*g_sV1p5)>=g_pozTY){if(g_scored){g_point++;}else{g_point-=2;}switch(true){case (g_point>=15):g_bgII=6;break;case(g_point>=10):g_bgII=5;break;case(g_point>=5):g_bgII=4;break;case(g_point>=0):g_bgII=3;break;case(g_point>=-5):g_bgII=2;break;case(g_point>=-10):g_bgII=1;break;default:g_bgII=0;break;}g_trash=0;}if(g_trash==0){g_pozY=0;g_pozX=25;g_trashV=Math.floor((Math.random()*4)+1);g_trash=Math.floor((Math.random()*4)+1);}else{g_pozY+=1;if(g_kC==37&&((g_pozX-1)*g_speedH)>0){g_pozX-=1;g_kC=0;}if(g_kC==39&&((g_pozX+1)*g_speedH)<g_ctx.canvas.width){g_pozX+=1;g_kC=0;}}}else{g_ctx.drawImage(g_pauseS,0,0,g_ctx.canvas.width,g_ctx.canvas.height);}}